<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HJF-ç­è¡¨æŸ¥è¯¢</title>
    <style>
        /* æ ·å¼éƒ¨åˆ†ä¿æŒä¸å˜ */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

        label {
            display: inline-block;
            margin-bottom: 10px;
            font-size: 14px !important;
        }

        input[type="date"] {
            padding: 5px;
            margin-bottom: 20px;
        }

        .picker {
            background: #EDF2FA;
            padding: 10px !important;
            border: 1px solid #EDF2FA;
            outline: none;
        }

        #annual-shift-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
        }

        .month-table {
            border-collapse: collapse;
            margin: 10px;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .month-table caption {
            font-weight: bold;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px 5px 0 0;
            background: #EDF2FA;
        }

        .month-table th,
        .month-table td {
            width: 50px;
            border: 1px solid #ddd;
            padding: 10px;
            min-width: 30px;
            text-align: center;
            vertical-align: middle;
            transition: all 0.3s ease;
        }

        .month-table th {
            background: #f8f9fa;
        }

        .weekend {
            background-color: #EDF2FA;
        }

        .shift {
            font-size: 0.9em;
            color: #666;
            display: block;
            margin-top: 5px;
        }

        #shift-result {
            margin: 15px 0;
            font-size: 1.1em;
            color: #333;
        }

        .selected-date {
            background-color: #F9D8D8 !important;
            position: relative;
            animation: pulse 0.5s ease;
        }

        .selected-date::after {
            content: 'â¤';
            color: #FF6B6B;
            position: absolute;
            right: 2px;
            top: 2px;
            font-size: 12px;
        }

        .textContent {
            /* border:1px solid #EDF2FA; */
            padding: 10px;
            font-size: 14px !important;
        }

        /* æ–°å¢å¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            position: relative;
            text-align: center;
            color: #fff;

        }

        #valentine-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1em;
            text-shadow: 0 0 10px #ff69b4;
            z-index: 10000;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #fff;
            font-size: 30px;
            cursor: pointer;
            transition: 0.3s;
        }

        .close-btn:hover {
            color: #ff69b4;
        }

        /* åŸæ ·å¼ä¿æŒä¸å˜ */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

        .close-btn {
            /* åŸæœ‰æ ·å¼ä¿æŒä¸å˜ */
            z-index: 10001;
            /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
            touch-action: manipulation;
            /* è§£å†³ç‚¹å‡»å»¶è¿Ÿé—®é¢˜ */
        }

        .modal-content canvas {
            pointer-events: none;
            /* é˜²æ­¢canvasé®æŒ¡ç‚¹å‡»äº‹ä»¶ */
        }
    </style>
</head>

<body>
    <!-- æ–°å¢æƒ…äººèŠ‚å¼¹çª— -->
    <div id="valentine-modal" class="modal">
        <span class="close-btn">&times;</span>
        <div class="modal-content">
            <div id="valentine-text">å“¥å“¥ï¼Œæƒ…äººèŠ‚å¿«ä¹å–”~ğŸ’–</div>
            <canvas id="pinkboard" width="800" height="600"></canvas>
        </div>
    </div>


    <h3>å“¥å“¥çš„ç­è¡¨ğŸ’•</h3>
    <label for="date-picker">å¿«é€ŸæŸ¥è¯¢æ—¥æœŸï¼š</label>
    <input class="picker" type="date" id="date-picker" min="2025-01-01" max="2035-12-31">
    <div class="textContent" id="shift-result"></div>

    <!-- <canvas id="pinkboard" width="420" height="500"></canvas> -->


    <div id="annual-shift-container"></div>



    <script>

        // æ–°å¢æƒ…äººèŠ‚å¼¹çª—æ§åˆ¶é€»è¾‘
        function checkValentineDay() {
            const today = new Date();
            // æ£€æŸ¥æ˜¯å¦æ˜¯2025å¹´2æœˆ14æ—¥æˆ–ä¹‹å
            if (today.getFullYear() === 2025 &&
                today.getMonth() === 1 &&
                today.getDate() === 14) {
                showModal();
            }
        }

        function showModal() {
            const modal = document.getElementById('valentine-modal');
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('valentine-modal');
            modal.style.display = 'none';
        }

        // ç»‘å®šå…³é—­äº‹ä»¶
        document.querySelector('.close-btn').addEventListener('click', closeModal);



        // åœ¨DOMåŠ è½½å®Œæˆåæ£€æŸ¥æ—¥æœŸ
        window.addEventListener('DOMContentLoaded', () => {
            checkValentineDay();
            // åŸæœ‰åˆå§‹åŒ–ä»£ç ...
        });






        const festivals = {
            '2025-01-01': 'å…ƒæ—¦',
            '2025-01-28': 'é™¤å¤•',
            '2025-01-29': 'æ˜¥èŠ‚',
            '2025-02-12': 'å…ƒå®µèŠ‚',
            '2025-02-14': 'æƒ…äººèŠ‚',
            '2025-04-04': 'æ¸…æ˜èŠ‚',
            '2025-05-01': 'åŠ³åŠ¨èŠ‚',
            '2025-05-20': 'çºªå¿µæ—¥',
            '2025-05-31': 'ç«¯åˆèŠ‚',
            '2025-09-28': 'ç”Ÿæ—¥',
            '2025-10-01': 'å›½åº†èŠ‚',
            '2025-10-06': 'ä¸­ç§‹èŠ‚'
        };

        const festivalWishes = {
            'å…ƒæ—¦': ["æ–°å¹´ç¬¬ä¸€å¤©è¦å’Œæœ€çˆ±çš„å“¥å“¥ä¸€èµ·è¿‡å‘€ï½ğŸ‰", "å…ƒæ°”æ»¡æ»¡è¿æ–°å¹´ï¼ä»Šæ™šåƒå¤§é¤åº†ç¥å§ğŸ·"],
            'é™¤å¤•': ["é™¤å¤•å®ˆå²ä¸åœ¨å®¶è¦è§†é¢‘è¿çº¿å“¦ï¼ç­‰å“¥å“¥å›å®¶åƒå¹´å¤œé¥­ğŸ®", "çˆ†ç«¹å£°ä¸­ä¸€å²é™¤ï¼Œå“¥å“¥åˆè€ä¸€å²å•¦ğŸ˜"],
            'æ˜¥èŠ‚': ["æ˜¥èŠ‚å¿«ä¹ï¼ç»™æˆ‘å“¥å“¥æ‹œå¹´å•¦ğŸ§§ æ­å–œå‘è´¢çº¢åŒ…æ‹¿æ¥", "æ–°å¹´è¦æ›´çˆ±ä½ çš„è€å©†å“¦ï¼æ­å–œå‘è´¢çº¢åŒ…æ‹¿æ¥ğŸ’°"],
            'å…ƒå®µèŠ‚': ["å…ƒå®µèŠ‚è¦åƒç”œç”œçš„æ±¤åœ†ï¼Œå¾—å¤§å¤§çš„å…ƒå®ğŸ’‹", "èŠ±ç¯å†ç¾ä¹Ÿæ¯”ä¸ä¸Šå“¥å“¥çš„çœ¼ç›âœ¨"],
            'æƒ…äººèŠ‚': ["æƒ…äººèŠ‚å¿«ä¹å–”~ å“¥å“¥ï¼Œæ„¿æˆ‘ä»¬å²æ™šé’å±±è·¯ï¼Œç™½é¦–æœŸåŒå½’âœ¨", "æƒ…äººèŠ‚å¿«ä¹å–”~ å“¥å“¥ï¼Œæ„¿æˆ‘ä»¬å²æ™šé’å±±è·¯ï¼Œç™½é¦–æœŸåŒå½’âœ¨"], 'æ¸…æ˜èŠ‚': ["æ¸…æ˜æ—¶èŠ‚é›¨çº·çº·ï¼Œä½ æ¥ä¸‹ä¸€å¥ğŸ‘©â¤ï¸ğŸ’‹ğŸ‘¨", "å‡ºå»è¸é’èµèŠ±æŠŠï¼Œå¸Œæœ›æ˜¯ä¸ªå¥½å¤©æ°”å‘¢ğŸŒ¸"],
            'åŠ³åŠ¨èŠ‚': ["åŠ³åŠ¨æœ€å…‰è£ï¼ä½†ä»Šå¤©è¦å¥½å¥½ä¼‘æ¯å‘€ğŸ’†â™‚ï¸", "äº”ä¸€å‡æœŸå¸¦æˆ‘å‡ºå»ç©å§ğŸ¡"],
            'çºªå¿µæ—¥': [`åœ¨ä¸€èµ·ç¬¬${Math.floor((new Date() - new Date("2020-05-20")) / 86400000)}å¤©å•¦ï½ğŸ’•,ä»Šå¤©çš„æˆ‘ä»¬æ˜¯ä¸æ˜¯å»é¢†è¯äº†å‘¢ï¼Œå“‡å–”~ ä¸€ç›´å¹¸ç¦ä¸‹å»`],
            'ç«¯åˆèŠ‚': ["ä»Šå¤©è¯¥åƒç”œç”œçš„ç²½å­å•¦ï¼Œä¸Šå¤œç­çš„å“¥å“¥ä»Šå¤©ä¹Ÿè¦åƒç²½å­å–”ğŸ‹", "ç«¯åˆèŠ‚å•¦ï¼Œå¯æƒœä»Šå¤©è¦ä¸Šå¤œç­ï¼Œç•™æˆ‘åœ¨å®¶é»˜é»˜è¿‡èŠ‚ğŸ©¹"],
            'ç”Ÿæ—¥': ["æˆ‘äº²çˆ±çš„å“¥å“¥ï¼Œç”Ÿæ—¥å¿«ä¹å–”ï¼åˆé•¿å¤§ä¸€å²å•¦ï¼Œç°åœ¨æ˜¯ä¸ªæˆç†Ÿé­…åŠ›ç”·äººå•¦ğŸ‘¨", "æˆ‘äº²çˆ±çš„å“¥å“¥ï¼Œç”Ÿæ—¥å¿«ä¹å–”ï¼åˆé•¿å¤§ä¸€å²å•¦ï¼Œç°åœ¨æ˜¯ä¸ªæˆç†Ÿé­…åŠ›ç”·äººå•¦ğŸ‘¨"],
            'å›½åº†èŠ‚': ["å›½åº†å‡æœŸè¯¥å¸¦æˆ‘å‡ºå»ç©å•¦ï¼èµ°å•Š~å»äº«å—è‡ªç”±çš„é£", "ä¸ºç¥–å›½åº†ç”Ÿçš„åŒæ—¶ä¹Ÿè¦åº†ç¥æˆ‘ä»¬çš„çˆ±æƒ…ğŸ’‘"],
            'ä¸­ç§‹èŠ‚': ["æœˆåœ†äººå›¢åœ†ï¼Œå“¦è±~åˆä¸Šå¤œç­å•¦ ä¸‹ç­äº†èµæœˆğŸŒ• ", "å“¦è±~åˆä¸Šå¤œç­å•¦ï¼Œæœˆé¥¼åˆ†ä½ ä¸€åŠğŸ’"]
        };

        const sweetSentences = [
            "å“¥å“¥ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å“¦ï¼è®°å¾—æƒ³æˆ‘ï½ğŸ’•",
            "å“‡ï¼Œè¿™ä¸ªç­æ¬¡ä¸é”™å˜›ï¼ä¸‹ç­å¸¦å¥½åƒçš„å›æ¥å‘€ï½ğŸ˜‹",
            "è®¤çœŸå·¥ä½œçš„å“¥å“¥æœ€å¸…äº†ï¼å¥–åŠ±ä½ å“ˆçŒ«ä¸€åª å“ˆå“ˆğŸ’†â™‚ï¸",
            "å¤œç­è¦æ³¨æ„èº«ä½“å‘€ï¼Œä¸‹ç­äº†è¦åƒç‚¹å®µå¤œğŸ± ä¸èƒ½é¥¿è‚šå­å–”",
            "ä¼‘æ¯çš„æ—¥å­è¦å¥½å¥½ä¼‘æ¯å“¦ï½ğŸ›Œ",
            "æ—©ç­æ—¥å‡ºå¥½æµªæ¼«ğŸŒ„ï¼Œä¸‹ç­å›å®¶è¦å¥½å¥½è¡¥çŒç¡å–”",
            "è¿™ä¸ªç­è¡¨å®‰æ’æ·±å¾—æœ•å¿ƒï¼Œèµæ—©ç‚¹ä¸‹ç­ğŸ˜˜",
            "ä¸Šç­ä¸è®¸çœ‹ğŸ‘€æ¼‚äº®å¦¹å¦¹ï¼ä¸ç„¶å›å®¶åªèƒ½åƒæˆ‘ä¸€æ‹³",
            "ä»Šå¤©åˆæ˜¯ä¸ºå°å®¶å¥‹æ–—çš„ä¸€å¤©å‘¢ï¼ŒåŠ æ²¹é¸­ï¼ğŸ¦†",
            "ç™½ç­è™½ç„¶è¾›è‹¦ï¼Œä½†æœ‰æˆ‘åœ¨ç­‰ä½ å›å®¶ğŸ ",
            `çŒœçŒœæ˜å¤©ä»€ä¹ˆæ—¥å­ï¼Ÿæ˜¯æˆ‘ä»¬ç›¸é‡çš„ç¬¬${Math.floor((new Date() - new Date("2020-05-20"))) / 86400000}å¤©å‘€ï½`,
            "æˆ‘ä»¬çš„å£å·æ˜¯å‘å®¶è‡´å¯Œï¼Œä¹°åˆ«å¢…ï¼ŒåŠ æ²¹é¸­ï¼ğŸ¦†",
            "ææŒ‡ä¸€ç®—ä»Šå¤©åˆæ˜¯ä¸€ä¸ªå‘è´¢çš„å¥½æ—¥å­ï¼Œå“‡å“ˆå“ˆå“ˆğŸ˜„",
            "å“¥å“¥ï¼Œä»Šå¤©å·¥ä½œè¦æ˜¯ç´¯äº†ï¼Œå°±å¹»æƒ³ä¸‹æˆ‘ä»¬ä»¥åä¸€èµ·ç¯çƒæ—…è¡Œï¼Œç¬é—´åŠ¨åŠ›æ»¡æ»¡æœ‰æ²¡æœ‰ğŸ˜œ",
            "ä¸Šç­å°±åƒå‡çº§æ‰“æ€ªï¼Œå“¥å“¥ä½ è‚¯å®šèƒ½ä¸€è·¯è¿‡å…³æ–©å°†ï¼Œæˆä¸ºèŒåœºå¤§ bossğŸ’ª",
            "å“¥å“¥ï¼Œè¦æ˜¯ä»Šå¤©å·¥ä½œé¡ºåˆ©ï¼Œæ™šä¸Šå¥–åŠ±è‡ªå·±åƒé¡¿å¤§é¤ï¼ŒæŠŠå¿«ä¹æ”¾å¤§æ”¾å¤§å†æ”¾å¤§ğŸ”",
            "å¬è¯´è®¤çœŸå·¥ä½œçš„å“¥å“¥è¿æ°”éƒ½ä¸ä¼šå·®ï¼Œä»Šå¤©è‚¯å®šèƒ½é‡åˆ°å¥½å¤šå°æƒŠå–œğŸ",
            "å“¥å“¥ï¼Œå·¥ä½œé—´éš™åˆ«å¿˜äº†æ´»åŠ¨æ´»åŠ¨ï¼Œä¸ç„¶èº«ä½“è¯¥æŠ—è®®å•¦ï¼Œåˆ°æ—¶å€™æˆ‘å¯ä¼šâ€˜æ•™è®­â€™ä½ çš„ğŸ˜",
            "ä½ å°±åƒè¶…çº§é©¬é‡Œå¥¥ï¼Œä¸ç®¡é‡åˆ°ä»€ä¹ˆå·¥ä½œéš¾é¢˜ï¼Œéƒ½èƒ½è½»æ¾è·³è¿‡å»ï¼ŒåŠ æ²¹å†²å‘€ğŸƒ",
            "å“¥å“¥ï¼Œè¦æ˜¯ä¸Šç­æ—¶çµæ„Ÿæ¯ç«­äº†ï¼Œå°±çœ‹çœ‹çª—å¤–ï¼Œè¯´ä¸å®šé£ä¼šæŠŠåˆ›æ„å¹è¿›ä½ è„‘è¢‹ğŸ§ ",
            "å·¥ä½œå°±åƒä¸€åœºæ¸¸æˆï¼Œå“¥å“¥ä½ è‚¯å®šèƒ½å‡­å€Ÿè¶…å¼ºå®åŠ›ï¼Œä¸€è·¯â€˜å¼€æŒ‚â€™ï¼Œèµ°å‘èƒœåˆ©âœŒ",
            "å“¥å“¥ï¼Œå¬è¯´çˆ±ç¬‘çš„äººå·¥ä½œæ•ˆç‡é«˜ï¼Œä½ è¿™ä¹ˆçˆ±ç¬‘ï¼Œä»Šå¤©è‚¯å®šèƒ½æ—©æ—©å®Œæˆä»»åŠ¡ğŸ˜„",
            "è¦æ˜¯å·¥ä½œå‹åŠ›å¤§ï¼Œå°±æŠŠå®ƒæƒ³è±¡æˆæ£‰èŠ±ç³–ï¼Œä¸€å£ä¸€å£åƒæ‰ï¼Œè½»æ¾åˆè§£å‹ğŸ¬",
            "å“¥å“¥ï¼Œä½ å°±åƒå·¥ä½œé¢†åŸŸçš„å°å¤ªé˜³ï¼Œèµ°åˆ°å“ªéƒ½èƒ½ç…§äº®ä¸€ç‰‡ï¼Œä»Šå¤©ç»§ç»­å‘å…‰å‘çƒ­å‘€ğŸŒ",
            "ä¸Šç­çš„æ—¶å€™å¶å°”å¼€ä¸ªå°å·®ä¹Ÿæ²¡äº‹å•¦ï¼Œå°±å½“æ˜¯ç»™å¤§è„‘æ”¾ä¸ªå‡ï¼Œä¸è¿‡åˆ«è¢«è€æ¿å‘ç°å“¦ğŸ˜…",
            "è¦æ˜¯ä»Šå¤©åŒäº‹å¤¸ä½ å‰å®³ï¼Œå¯åˆ«å¤ªéª„å‚²ï¼Œæ¯•ç«Ÿè¿™æ˜¯ä½ å®åŠ›çš„æ­£å¸¸å‘æŒ¥ğŸ˜",
            "æ„Ÿè§‰å“¥å“¥ä»Šå¤©åœ¨å·¥ä½œä¸­èƒ½å‘ç°å¾ˆå¤šä¹è¶£ï¼Œè¯´ä¸å®šè¿˜èƒ½è§£é”æ–°çš„å·¥ä½œæŠ€èƒ½ğŸ”“",
            "å·¥ä½œå†å¿™ï¼Œå“¥å“¥ä¹Ÿè¦æŠ½æ—¶é—´å·ä¸ªæ‡’ï¼ŒåŠ³é€¸ç»“åˆï¼Œæ•ˆç‡ç¿»å€ğŸ’¯",
            "å“¥å“¥ï¼Œä½ å°±åƒä¸€æœ¬èŒåœºç§˜ç±ï¼Œæ¯ä¸€é¡µéƒ½å†™æ»¡äº†ä¼˜ç§€ï¼Œä»Šå¤©ç»§ç»­ä¹¦å†™ç²¾å½©ğŸ“–",
            "å¬è¯´å·¥ä½œä¸­çš„ä½ é­…åŠ›å€¼ä¼šçˆ†è¡¨ï¼Œä¸çŸ¥é“ä»Šå¤©ä¼šè¿·å€’å¤šå°‘äººå‘€ğŸ¤£",
            "ä¸Šç­å°±åƒä¸€åœºå†’é™©ï¼Œå“¥å“¥ä½ è‚¯å®šèƒ½å¸¦ç€æ»¡æ»¡çš„æ”¶è·ï¼Œå¹³å®‰â€˜å½’æ¥â€™ğŸˆ",
            "è¦æ˜¯ä»Šå¤©å·¥ä½œå®Œæˆå¾—åˆå¿«åˆå¥½ï¼Œæ™šä¸Šå¥–åŠ±è‡ªå·±çœ‹ä¸€åœºå–œæ¬¢çš„ç”µå½±âš½",
            "ä½ å°±åƒå·¥ä½œä¸Šçš„å°æ—‹é£ï¼Œé£é£ç«ç«ï¼ŒæŠŠæ‰€æœ‰ä»»åŠ¡éƒ½è¿…é€Ÿæå®šğŸ’¨",
            "ä»Šå¤©èƒ½åœ¨å·¥ä½œä¸­ç»“è¯†å¾ˆå¤šæœ‰è¶£çš„æœ‹å‹ï¼Œæ‹“å±•è‡ªå·±çš„äººè„‰åœˆğŸ“±",
            "å·¥ä½œå†è¾›è‹¦ï¼Œæƒ³æƒ³æˆ‘ä»¬çš„æœªæ¥ï¼Œå“¥å“¥ä½ è‚¯å®šèƒ½ä¸€é¼“ä½œæ°”ï¼Œå‹‡å¾€ç›´å‰ğŸš€",
            "è¦æ˜¯ä»Šå¤©å·¥ä½œç´¯äº†ï¼Œå°±æƒ³æƒ³æ™šä¸Šçš„è½»æ¾æ—¶å…‰ï¼Œæ´—ä¸ªçƒ­æ°´æ¾¡ï¼Œåƒç‚¹é›¶é£Ÿï¼Œç¾æ»‹æ»‹ğŸ›€",
            "å“¥å“¥ï¼Œå¬è¯´å·¥ä½œè®¤çœŸçš„äººä¼šè‡ªå¸¦å…‰èŠ’ï¼Œä½ ä»Šå¤©è‚¯å®šæ˜¯3å·çº¿æœ€äº®çš„ä»”ğŸŒŸ",
            "ä¸Šç­çš„æ—¶å€™åˆ«å¤ªç´§ç»·å•¦ï¼Œé€‚å½“å·æ‡’ï¼Œè¯´ä¸å®šè¿˜èƒ½åˆ›é€ å‡ºæ„æƒ³ä¸åˆ°çš„æˆç»©ğŸ‰",
            "ä½ å°±æ˜¯å·¥ä½œä¸Šçš„é­”æ³•å¸ˆï¼Œæ€»èƒ½æŠŠå¤æ‚çš„äº‹æƒ…å˜å¾—ç®€å•åˆæœ‰è¶£ğŸ§™",
            "è®°å¾—åƒæ—©é¤å“¦ï¼Œä¸€å¤©çš„èƒ½é‡ä»æ—©é¤å¼€å§‹ğŸ¥ª",
            "å¤œç­è™½ç„¶è¾›è‹¦ï¼Œä½†æƒ³åˆ°ä¸‹ç­åçš„è‡ªç”±æ—¶å…‰å°±å……æ»¡æœŸå¾…ğŸŒ™,æ—©ç‚¹ç¡è§‰è§‰",
            "ä¼‘æ¯æ—¥å°±æ˜¯è¦å¥½å¥½æ”¾æ¾ï¼Œç¡åˆ°è‡ªç„¶é†’ğŸ˜´",
            "ç™½ç­è™½ç„¶ç´¯ï¼Œä½†æƒ³åˆ°ä¸‹ç­åçš„ç¾é£Ÿå°±å……æ»¡åŠ¨åŠ›ğŸ”",
            "ä»Šå¤©ä¹Ÿæ˜¯å…ƒæ°”æ»¡æ»¡çš„ä¸€å¤©ï¼ŒåŠ æ²¹æ‰“å·¥äººï¼ğŸ‘·â€â™€ï¸",
            "å¤œç­è®°å¾—å¤šç©¿ç‚¹è¡£æœï¼Œåˆ«ç€å‡‰äº†ğŸ§¥",
            "ä»Šå¤©çš„åŠªåŠ›æ˜¯ä¸ºäº†æœªæ¥çš„ç¾å¥½ç”Ÿæ´»ï¼Œå†²å‘€ï¼ğŸŒˆ",
            "æƒ³æƒ³ä¸‹ç­åçš„å®µå¤œæ˜¯ä¸æ˜¯å……æ»¡æœŸå¾…ğŸœ",
            "ä¸‹ç­åä¸€èµ·å»åƒç«é”…å§ï¼Œæš–æš–èº«å­ğŸ²",
            "ä¼‘æ¯çš„æ—¶å€™è®°å¾—å¤šè¿åŠ¨å»æ‰“æ‰“ç¯®çƒï¼Œä¿æŒå¥åº·ğŸƒâ€â™‚ï¸",
            "è®°å¾—å¤šå–æ°´ï¼Œä¿æŒæ°´åˆ†ğŸ’§ æ´»åŠ›æ»¡æ»¡",
            "ä¼‘æ¯æ—¥å°±æ˜¯è¦å¥½å¥½äº«å—ï¼Œå»çˆ¬å±±å§ ä¹é¡¶å±±æ€ä¹ˆæ · å“ˆå“ˆâ›°ï¸",
            "ä»Šå¤©åˆæ˜¯ç™½ç­å“Ÿï¼Œä¸‹ç­åä¸€èµ·å»åƒç¾Šè‚‰ä¸²å§ï¼Œäº«å—ç¾é£ŸğŸ–",
            "æ—©ç­èµ·åºŠå†å¿™ï¼Œä¹Ÿåˆ«å¿˜äº†åƒæ—©é¤å“¦ï¼Œåƒé¥±äº†æ‰æœ‰åŠ›æ°”å·¥ä½œğŸ¥ª",
            "è¦æ˜¯ä»Šå¤©å·¥ä½œå®Œæˆå¾—æ—©ï¼Œå°±æ—©ç‚¹å›å®¶å§ï¼Œæˆ‘ç­‰ä½ ğŸ ",
            "ä¸Šç­çš„æ—¶å€™è¦è®°å¾—å¤šå–æ°´ï¼Œä¿æŒå¥½çŠ¶æ€å“¦ğŸ¥¤",
            "è¦æ˜¯å·¥ä½œå‹åŠ›å¤ªå¤§ï¼Œå°±æ‰¾æˆ‘å€¾è¯‰å€¾è¯‰ï¼Œæˆ‘ä¸€ç›´åœ¨è¿™é‡Œé™ªç€ä½ ğŸ¤—",
            "è¦æ˜¯ä»Šå¤©å·¥ä½œé‡åˆ°éš¾é¢˜äº†ï¼Œåˆ«ç€æ€¥ï¼Œæ…¢æ…¢è§£å†³ï¼Œæˆ‘ç›¸ä¿¡ä½ ğŸ’ª",
            "å“¥å“¥ä»Šå¤©çš„ç­æ¬¡æ€ä¹ˆæ ·å‘€ï¼Ÿå¸Œæœ›ä¸€åˆ‡é¡ºåˆ©å“¦ï½ğŸ¤—",
            "ä¸Šç­çš„æ—¶å€™å¶å°”åšä¸ªç™½æ—¥æ¢¦ä¹Ÿä¸é”™å“¦ï¼Œè¯´ä¸å®šæ¢¦æƒ³å°±å®ç°äº†å‘¢âœ¨",
            "è¦æ˜¯ä»Šå¤©å·¥ä½œå®Œæˆå¾—ä¸é”™ï¼Œæ™šä¸Šå¯ä»¥å¥–åŠ±è‡ªå·±åƒé¡¿å¤§é¤ğŸ”",
            "å“¥å“¥ï¼Œä»Šå¤©ä¸Šç­è¦å¼€å¼€å¿ƒå¿ƒçš„å“¦ï¼Œæˆ‘ç­‰ä½ ä¸‹ç­å›æ¥åˆ†äº«è¶£äº‹ï½ğŸ’•",
            "ææŒ‡ä¸€ç®—ï¼Œå—¯ ä»Šå¤©åˆæ˜¯ä¸ªå‡ºé—¨æ¡é’±çš„å¥½æ—¥å­",
            "ææŒ‡ä¸€ç®—ï¼Œå—¯ æˆ‘ä»¬å®¶å¿«æš´å¯Œäº†  å“‡å“ˆå“ˆå“ˆ",
            "å¤©å¤§åœ°å¤§ å°å®¶æœ€å¤§ï¼Œå’±ä»¬ä¸€èµ·åŠªåŠ›ï¼Œæœªæ¥å¯æœŸğŸ ",
            "åˆæ˜¯å¥½å¥½ä¼‘æ¯çš„ä¸€å¤©ï¼Œçœ‹çœ‹æ˜¯å»é’“é±¼å’§è¿˜æ˜¯é’“é±¼å’§  å“ˆå“ˆ",

        ];





        const shiftOrder = ['ä¼‘æ¯', 'ç™½ç­', 'å¤œç­', 'æ—©ç­',];
        const startYear = 2025;
        const baseDate = new Date('2025-01-01');

        function updateHighlight(dateString) {
            document.querySelectorAll('.selected-date').forEach(cell => {
                cell.classList.remove('selected-date');
            });

            const targetCells = document.querySelectorAll(`[data-date="${dateString}"]`);
            targetCells.forEach(cell => {
                cell.classList.add('selected-date');
                void cell.offsetWidth;
                cell.style.animation = 'pulse 0.5s ease';
            });
        }

        function getShiftForDate(date) {
            const baseDate = new Date(Date.UTC(2025, 0, 1)); // 2025-01-01 UTC
            const currentDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
            let daysDiff = Math.floor((currentDate - baseDate) / (1000 * 60 * 60 * 24));

            // ç¡®ä¿éè´Ÿæ•°
            while (daysDiff < 0) {
                daysDiff += shiftOrder.length;
            }

            return shiftOrder[daysDiff % shiftOrder.length];
        }

        document.getElementById('date-picker').addEventListener('change', function () {
            const selectedDate = new Date(this.value);
            generateCalendar(selectedDate);

            const dateString = this.value;
            const shift = getShiftForDate(selectedDate);

            updateHighlight(dateString);

            let message;
            const daysSinceMeeting = Math.floor((new Date() - new Date('2020-05-20')) / 86400000);

            if (festivals[dateString]) {
                // èŠ‚æ—¥é€»è¾‘ä¿æŒä¸å˜
                const festival = festivals[dateString];
                const wishes = festivalWishes[festival];
                message = wishes[Math.floor(Math.random() * wishes.length)];
            } else {
                // ä¿®æ”¹æ¶ˆæ¯é€‰æ‹©é€»è¾‘
                if (shift === 'ä¼‘æ¯') {
                    // ä¼‘æ¯ç­æ¬¡æ—¶åªåŒ¹é…ä¼‘æ¯ç›¸å…³æ¶ˆæ¯
                    const restMessages = sweetSentences.filter(sentence =>
                        sentence.includes('ä¼‘æ¯') ||
                        sentence.includes('æ”¾æ¾') ||
                        sentence.includes('ç¡åˆ°è‡ªç„¶é†’') ||
                        sentence.includes('è¿åŠ¨')
                    );
                    message = restMessages[Math.floor(Math.random() * restMessages.length)];
                } else {
                    // å…¶ä»–ç­æ¬¡ä¿æŒåŸæœ‰çš„80/20æ¦‚ç‡é€»è¾‘
                    const shiftSpecificMessages = sweetSentences.filter(sentence => {
                        switch (shift) {
                            case 'æ—©ç­':
                                return sentence.includes('æ—©ç­') || sentence.includes('æ—¥å‡º');
                            case 'ç™½ç­':
                                return sentence.includes('ç™½ç­');
                            case 'å¤œç­':
                                return sentence.includes('å¤œç­') || sentence.includes('å®µå¤œ');
                            default:
                                return false;
                        }
                    });

                    const genericMessages = sweetSentences.filter(sentence => {
                        return !sentence.includes('æ—©ç­') &&
                            !sentence.includes('ç™½ç­') &&
                            !sentence.includes('å¤œç­') &&
                            !sentence.includes('ä¼‘æ¯') &&
                            !sentence.includes('æ—¥å‡º') &&
                            !sentence.includes('å®µå¤œ');
                    });

                    // ä¿æŒ80/20æ¦‚ç‡
                    if (shiftSpecificMessages.length > 0 && Math.random() < 0.2) {
                        message = shiftSpecificMessages[Math.floor(Math.random() * shiftSpecificMessages.length)];
                    } else {
                        message = genericMessages[Math.floor(Math.random() * genericMessages.length)];
                    }
                }
            }

            // æ›¿æ¢æ¶ˆæ¯ä¸­çš„å˜é‡
            message = message.replace(/\${days}/g, daysSinceMeeting);

            document.getElementById('shift-result').innerHTML =
                `ğŸ“…${dateString} ç­æ¬¡ï¼š${shift}<br><br>ğŸ’Œ${message}`;
        });


        function generateCalendar(selectedDate) {
            const container = document.getElementById('annual-shift-container');
            // æ¸…ç©ºåŸæœ‰çš„æ—¥å†è¡¨æ ¼
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }

            const year = selectedDate.getFullYear();
            const month = selectedDate.getMonth();

            const table = document.createElement('table');
            table.className = 'month-table';

            const caption = table.createCaption();
            caption.textContent = new Date(year, month).toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long'
            });

            const headerRow = table.insertRow();
            ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'].forEach(day => {
                const th = document.createElement('th');
                th.textContent = day;
                headerRow.appendChild(th);
            });

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            let currentDate = new Date(firstDay);
            const baseDate = new Date('2025-01-01');
            let overallDiffDays = Math.floor((firstDay - baseDate) / (1000 * 3600 * 24));

            // ç¡®ä¿overallDiffDaysä¸ºéè´Ÿæ•°
            if (overallDiffDays < 0) {
                overallDiffDays += Math.ceil(-overallDiffDays / shiftOrder.length) * shiftOrder.length;
            }

            let row = table.insertRow();

            for (let i = 0; i < firstDay.getDay(); i++) {
                row.insertCell();
            }

            while (currentDate <= lastDay) {
                if (row.cells.length === 7) {
                    row = table.insertRow();
                }

                const cell = row.insertCell();
                const day = currentDate.getDate();
                const shift = getShiftForDate(currentDate); // ä½¿ç”¨ç»Ÿä¸€çš„ç­æ¬¡è®¡ç®—å‡½æ•°

                if ([0, 6].includes(currentDate.getDay())) {
                    cell.classList.add('weekend');
                }

                const yearStr = currentDate.getFullYear();
                const m = String(currentDate.getMonth() + 1).padStart(2, '0');
                const d = String(currentDate.getDate()).padStart(2, '0');
                const dateStr = `${yearStr}-${m}-${d}`;
                cell.dataset.date = dateStr;

                cell.innerHTML = `
            <div>${day}</div>
            <div class="shift">${shift}</div>
        `;

                currentDate.setDate(currentDate.getDate() + 1);
            }

            while (row.cells.length < 7) {
                row.insertCell();
            }

            container.appendChild(table);
        }


        window.addEventListener('DOMContentLoaded', () => {
            const today = new Date();
            const minDate = new Date('2025-01-01');
            const defaultDate = today >= minDate ? today : minDate;
            generateCalendar(defaultDate);

            const dateString = defaultDate.toISOString().split('T')[0];
            document.getElementById('date-picker').value = dateString;
            document.getElementById('date-picker').dispatchEvent(new Event('change'));
        });

    </script>

    <!-- å¼¹çª—ç‰¹æ•ˆ -->
    <script>
        /*
         * Settings
         */
        // var settings = {
        //     particles: {
        //         length: 500, // maximum amount of particles
        //         duration: 2, // particle duration in sec
        //         velocity: 100, // particle velocity in pixels/sec
        //         effect: -0.75, // play with this for a nice effect
        //         size: 30, // particle size in pixels
        //     },
        // };

        var settings = {
            particles: {
                length: 500,  // å¢åŠ ç²’å­æ•°é‡
                duration: 3,   // å»¶é•¿ç²’å­æŒç»­æ—¶é—´
                velocity: 150, // æé«˜ç²’å­é€Ÿåº¦
                effect: -0.9,  // å¢å¼ºç²’å­æ•ˆæœ
                size: 30,      // å¢å¤§ç²’å­å°ºå¯¸
            },
        };

        /*
         * RequestAnimationFrame polyfill by Erik M?ller
         */
        (function () {
            var b = 0;
            var c = ["ms", "moz", "webkit", "o"];
            for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {
                window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"];
                window.cancelAnimationFrame =
                    window[c[a] + "CancelAnimationFrame"] ||
                    window[c[a] + "CancelRequestAnimationFrame"];
            }
            if (!window.requestAnimationFrame) {
                window.requestAnimationFrame = function (h, e) {
                    var d = new Date().getTime();
                    var f = Math.max(0, 16 - (d - b));
                    var g = window.setTimeout(function () {
                        h(d + f);
                    }, f);
                    b = d + f;
                    return g;
                };
            }
            if (!window.cancelAnimationFrame) {
                window.cancelAnimationFrame = function (d) {
                    clearTimeout(d);
                };
            }
        })();

        /*
         * Point class
         */
        var Point = (function () {
            function Point(x, y) {
                this.x = typeof x !== "undefined" ? x : 0;
                this.y = typeof y !== "undefined" ? y : 0;
            }

            Point.prototype.clone = function () {
                return new Point(this.x, this.y);
            };
            Point.prototype.length = function (length) {
                if (typeof length == "undefined")
                    return Math.sqrt(this.x * this.x + this.y * this.y);
                this.normalize();
                this.x *= length;
                this.y *= length;
                return this;
            };
            Point.prototype.normalize = function () {
                var length = this.length();
                this.x /= length;
                this.y /= length;
                return this;
            };
            return Point;
        })();

        /*
         * Particle class
         */

        var Particle = (function () {
            function Particle() {
                this.position = new Point();
                this.velocity = new Point();
                this.acceleration = new Point();
                this.age = 0;
            }

            Particle.prototype.initialize = function (x, y, dx, dy) {
                this.position.x = x;
                this.position.y = y;
                this.velocity.x = dx;
                this.velocity.y = dy;
                this.acceleration.x = dx * settings.particles.effect;
                this.acceleration.y = dy * settings.particles.effect;
                this.age = 0;
            };
            Particle.prototype.update = function (deltaTime) {
                this.position.x += this.velocity.x * deltaTime;
                this.position.y += this.velocity.y * deltaTime;
                this.velocity.x += this.acceleration.x * deltaTime;
                this.velocity.y += this.acceleration.y * deltaTime;
                this.age += deltaTime;
            };
            Particle.prototype.draw = function (context, image) {
                function ease(t) {
                    return --t * t * t + 1;
                }

                var size = image.width * ease(this.age / settings.particles.duration);
                context.globalAlpha = 1 - this.age / settings.particles.duration;
                context.drawImage(
                    image,
                    this.position.x - size / 2,
                    this.position.y - size / 2,
                    size,
                    size
                );
            };
            return Particle;
        })();

        /*
         * ParticlePool class
         */
        var ParticlePool = (function () {
            var particles,
                firstActive = 0,
                firstFree = 0,
                duration = settings.particles.duration;

            function ParticlePool(length) {
                // create and populate particle pool
                particles = new Array(length);
                for (var i = 0; i < particles.length; i++)
                    particles[i] = new Particle();
            }

            ParticlePool.prototype.add = function (x, y, dx, dy) {
                particles[firstFree].initialize(x, y, dx, dy);

                // handle circular queue
                firstFree++;
                if (firstFree == particles.length) firstFree = 0;
                if (firstActive == firstFree) firstActive++;
                if (firstActive == particles.length) firstActive = 0;
            };
            ParticlePool.prototype.update = function (deltaTime) {
                var i;

                // update active particles
                if (firstActive < firstFree) {
                    for (i = firstActive; i < firstFree; i++)
                        particles[i].update(deltaTime);
                }
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++)
                        particles[i].update(deltaTime);
                    for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);
                }

                // remove inactive particles
                while (
                    particles[firstActive].age >= duration &&
                    firstActive != firstFree
                ) {
                    firstActive++;
                    if (firstActive == particles.length) firstActive = 0;
                }
            };
            ParticlePool.prototype.draw = function (context, image) {
                // draw active particles
                if (firstActive < firstFree) {
                    for (i = firstActive; i < firstFree; i++)
                        particles[i].draw(context, image);
                }
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++)
                        particles[i].draw(context, image);
                    for (i = 0; i < firstFree; i++) particles[i].draw(context, image);
                }
            };
            return ParticlePool;
        })();

        /*
         * Putting it all together
         */
        (function (canvas) {
            var context = canvas.getContext("2d"),
                particles = new ParticlePool(settings.particles.length),
                particleRate =
                    settings.particles.length / settings.particles.duration, // particles/sec
                time;

            // get point on heart with -PI <= t <= PI
            function pointOnHeart(t) {
                return new Point(
                    160 * Math.pow(Math.sin(t), 3),
                    130 * Math.cos(t) -
                    50 * Math.cos(2 * t) -
                    20 * Math.cos(3 * t) -
                    10 * Math.cos(4 * t) +
                    25
                );
            }

            // creating the particle image using a dummy canvas
            var image = (function () {
                var canvas = document.createElement("canvas"),
                    context = canvas.getContext("2d");
                canvas.width = settings.particles.size;
                canvas.height = settings.particles.size;

                // helper function to create the path
                function to(t) {
                    var point = pointOnHeart(t);
                    point.x =
                        settings.particles.size / 2 +
                        (point.x * settings.particles.size) / 350;
                    point.y =
                        settings.particles.size / 2 -
                        (point.y * settings.particles.size) / 350;
                    return point;
                }

                // create the path
                context.beginPath();
                var t = -Math.PI;
                var point = to(t);
                context.moveTo(point.x, point.y);
                while (t < Math.PI) {
                    t += 0.01; // baby steps!
                    point = to(t);
                    context.lineTo(point.x, point.y);
                }
                context.closePath();
                // create the fill
                context.fillStyle = "#ea80b0";
                context.fill();
                // create the image
                var image = new Image();
                image.src = canvas.toDataURL();
                return image;
            })();

            // render that thing!
            function render() {
                // next animation frame
                requestAnimationFrame(render);

                // update time
                var newTime = new Date().getTime() / 1000,
                    deltaTime = newTime - (time || newTime);
                time = newTime;

                // clear canvas
                context.clearRect(0, 0, canvas.width, canvas.height);

                // create new particles
                var amount = particleRate * deltaTime;
                for (var i = 0; i < amount; i++) {
                    var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
                    var dir = pos.clone().length(settings.particles.velocity);
                    particles.add(
                        canvas.width / 2 + pos.x,
                        canvas.height / 2 - pos.y,
                        dir.x,
                        -dir.y
                    );
                }

                // update and draw particles
                particles.update(deltaTime);
                particles.draw(context, image);
            }

            // handle (re-)sizing of the canvas
            function onResize() {
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
            }

            window.onresize = onResize;

            // delay rendering bootstrap
            setTimeout(function () {
                onResize();
                render();
            }, 10);
        })(document.getElementById("pinkboard"));

    </script>
</body>

</html>
